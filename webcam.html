<!DOCTYPE html>
<html lang="ml">
<head>
<meta charset="UTF-8">
<title>Webcam Interface</title>
<style>
    body {
        margin: 0;
        background: black;
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        height: 100vh;
        position: relative;
    }
    video, img {
        width: 400px;
        height: 300px;
        object-fit: cover;
        border: 3px solid white;
        border-radius: 10px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.6);
    }
    button {
        margin-top: 12px;
        padding: 10px 20px;
        font-size: 1.1rem;
        border: none;
        background: yellow;
        color: black;
        font-weight: bold;
        border-radius: 6px;
        cursor: pointer;
    }
    button:hover {
        background: gold;
    }
    /* Flash overlay */
    #flash {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: white;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.2s ease;
        z-index: 999;
    }
</style>
</head>
<body>

<!-- Webcam video -->
<video id="webcam" autoplay playsinline></video>

<!-- Captured image placeholder -->
<img id="capturedImage" style="display:none;" alt="Captured Image">

<!-- Capture button -->
<button id="captureBtn">ðŸ“¸ Capture</button>

<!-- Hidden canvas for taking snapshots -->
<canvas id="snapshotCanvas" width="400" height="300" style="display:none;"></canvas>

<!-- Shutter sound -->
<audio id="shutterSound" src="shutter.mp3" preload="auto"></audio>

<!-- Flash overlay -->
<div id="flash"></div>

<script>
    const video = document.getElementById('webcam');
    const capturedImage = document.getElementById('capturedImage');
    const canvas = document.getElementById('snapshotCanvas');
    const shutterSound = document.getElementById('shutterSound');
    const captureBtn = document.getElementById('captureBtn');
    const flash = document.getElementById('flash');

    // Start webcam
    navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => {
            video.srcObject = stream;
        })
        .catch(err => {
            console.error("Webcam access denied:", err);
        });

    // Capture image
    captureBtn.addEventListener('click', () => {
        const context = canvas.getContext('2d');
        context.drawImage(video, 0, 0, canvas.width, canvas.height);

        // Play shutter sound
        shutterSound.currentTime = 0;
        shutterSound.play();

        // Flash effect
        flash.style.opacity = "1";
        setTimeout(() => {
            flash.style.opacity = "0";
        }, 200);

        // Show captured image in center
        const imageData = canvas.toDataURL('image/png');
        capturedImage.src = imageData;
        capturedImage.style.display = "block";
        video.style.display = "none"; // hide webcam
        captureBtn.style.display = "none"; // hide button
    });
</script>

</body>
</html>
